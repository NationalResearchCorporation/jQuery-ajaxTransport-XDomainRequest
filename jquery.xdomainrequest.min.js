/*!
 * jQuery-ajaxTransport-XDomainRequest - v1.0.1 - 2013-10-17
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2013 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */
(function(e){if(!e.support.cors&&e.ajaxTransport&&window.XDomainRequest){var t=/^https?:\/\//i;var n=/^get|post$/i;var r=new RegExp("^"+location.protocol,"i");var i=/text\/html/i;var s=/\/json/i;var o=/\/xml/i;e.ajaxTransport("* text html xml json",function(u,a,f){if(u.crossDomain&&u.async&&n.test(u.type)&&t.test(u.url)&&r.test(u.url)){var l=null;var c=(a.dataType||"").toLowerCase();return{send:function(t,n){l=new XDomainRequest;if(/^\d+$/.test(a.timeout)){l.timeout=a.timeout}l.ontimeout=function(){n(500,"timeout")};l.onload=function(){var t="Content-Length: "+l.responseText.length+"\r\nContent-Type: "+l.contentType;var r={code:200,message:"success"};var u={text:l.responseText};try{if(c==="json"||c!=="text"&&s.test(l.contentType)){try{if(l.responseText){u.json=e.parseJSON(l.responseText)}else{r.code=204;r.message="nocontent"}}catch(a){r.code=500;r.message="parseerror"}}else if(c==="html"||i.test(l.contentType)){u.html=l.responseText}else if(c==="xml"||c!=="text"&&o.test(l.contentType)){var f=new ActiveXObject("Microsoft.XMLDOM");f.async=false;try{f.loadXML(l.responseText)}catch(a){f=undefined}if(!f||!f.documentElement||f.getElementsByTagName("parsererror").length){r.code=500;r.message="parseerror";throw"Invalid XML: "+l.responseText}u.xml=f}}catch(h){throw h}finally{n(r.code,r.message,u,t)}};l.onprogress=function(){};l.onerror=function(){n(500,"error",{text:l.responseText})};var r="";if(a.data){r=e.type(a.data)==="string"?a.data:e.param(a.data)}if(r!=""){r=r+"&"}r=r+"Authorization-Ticket="+jQuery.cookie(".ASPXAUTH");l.open(u.type,u.url);l.send(r)},abort:function(){if(l){l.abort()}}}}})}})(jQuery)